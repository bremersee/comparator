<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src/site/markdown/index.md at 01.01.2021 18:44:665
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20210101" />
    <meta http-equiv="Content-Language" content="en" />
    <title>comparator &#x2013; Bremersee Comparator</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="./" id="bannerLeft"><h2>Comparator</h2>
</a></div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="projectVersion">Version: 2.3.0</li>
        <li id="publishDate" class="pull-right">Last Published: 01.01.2021 18:44:665</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-down"></span>Project Information</a>
    <ul class="nav nav-list">
    <li><a href="dependencies.html" title="Dependencies"><span class="none"></span>Dependencies</a></li>
    <li><a href="dependency-info.html" title="Dependency Information"><span class="none"></span>Dependency Information</a></li>
    <li><a href="dependency-management.html" title="Dependency Management"><span class="none"></span>Dependency Management</a></li>
    <li><a href="distribution-management.html" title="Distribution Management"><span class="none"></span>Distribution Management</a></li>
    <li class="active"><a href="#"><span class="none"></span>About</a></li>
    <li><a href="issue-management.html" title="Issue Management"><span class="none"></span>Issue Management</a></li>
    <li><a href="licenses.html" title="Licenses"><span class="none"></span>Licenses</a></li>
    <li><a href="plugin-management.html" title="Plugin Management"><span class="none"></span>Plugin Management</a></li>
    <li><a href="plugins.html" title="Plugins"><span class="none"></span>Plugins</a></li>
    <li><a href="scm.html" title="Source Code Management"><span class="none"></span>Source Code Management</a></li>
    <li><a href="summary.html" title="Summary"><span class="none"></span>Summary</a></li>
    <li><a href="team.html" title="Team"><span class="none"></span>Team</a></li>
    </ul>
</li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="https://maven.apache.org/" title="Built by Maven" class="builtBy"><img class="builtBy"  alt="" src="#"    /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>Bremersee Comparator</h1>
<p>This project contains a builder for comparing and sorting objects.</p>
<p>The comparator can compare any kind of objects which have the same attributes or the same &#x2018;getters&#x2019;. It uses reflection to get the values of these attributes or &#x2018;getters&#x2019;. The values may be a simple type like java.lang.String or a complex type which implements java.lang.Comparable.</p><section><section>
<h3><a name="Usage"></a>Usage</h3>
<p>Given is for example a tree that is represented by these classes:</p>
<p>The common Node class:</p>

<div class="source">
<div class="source"><pre class="prettyprint">import java.util.Date;

abstract class Node {
  private Date createdAt;
  private String name;
  // getter and setter
}
</pre></div></div>

<p>The Branch class:</p>

<div class="source">
<div class="source"><pre class="prettyprint">import java.util.List;
import java.util.ArrayList;

class Branch extends Node {
  private List&lt;Node&gt; children = new ArrayList&lt;&gt;();
  // getter
}
</pre></div></div>

<p>The Leaf class:</p>

<div class="source">
<div class="source"><pre class="prettyprint">class Leaf extends Node {
  private String value;
  // getter and setter
}
</pre></div></div>

<p>You want to sort a list of nodes by name. And if the names are equal by created date:</p>

<div class="source">
<div class="source"><pre class="prettyprint">import org.bremersee.comparator.*;
import java.util.List;
import java.util.ArrayList;

class Example {
  public static void main(String[] args) {
    List&lt;Node&gt; list = new ArrayList&lt;&gt;();
    // add nodes
    list.sort(ComparatorBuilder.builder()
        .add(&quot;name&quot;, true, true, false)        // fieldName, asc, ignoreCase, nullIsFirst
        .add(&quot;createdAt&quot;, false, true, false)  // fieldName, asc, ignoreCase, nullIsFirst
        .build());
  }
}
</pre></div></div>

<p>That&#x2019;s all. All nodes in the list are sorted by name and date. But what happens, if you want to sort them by type (first the branches and then the leafs) and then by name and date? There is no field that stores the type. Then you can do this:</p>

<div class="source">
<div class="source"><pre class="prettyprint">import org.bremersee.comparator.*;
import java.util.List;
import java.util.ArrayList;

class Example {
  public static void main(String[] args) {
    List&lt;Node&gt; list = new ArrayList&lt;&gt;();
    // add nodes
    list.sort(ComparatorBuilder.builder()
        .add((o1, o2) -&gt;
            (o1 instanceof Branch &amp;&amp; o2 instanceof Branch) ? 0 : o1 instanceof Branch ? -1 : 1)
        .add(&quot;name&quot;, true, true, false)        // fieldName, asc, ignoreCase, nullIsFirst
        .add(&quot;createdAt&quot;, false, true, false)  // fieldName, asc, ignoreCase, nullIsFirst
        .build());
  }
}
</pre></div></div>

<p>Now you have a list, that contains the branches first, sorted by name and date, and then the leafs.</p>
<p>The definition of the sorting can also be described by a string. The string of the example above can look like this:</p>

<div class="source">
<div class="source"><pre class="prettyprint">type|name|createdAt,desc
</pre></div></div>

<p>The syntax is:</p>

<div class="source">
<div class="source"><pre class="prettyprint">fieldName0,asc,ignoreCase,nullIsFirst|fieldName1,desc,ignoreCase,nullIsFirst
</pre></div></div>

<p>The pipe (|) character separtes the fields. The field values are separated by comma (,). The defaults are asc = true, ignoreCase = true and nullIsFirst = false and can be omitted. That&#x2019;s why</p>

<div class="source">
<div class="source"><pre class="prettyprint">type|name|createdAt,desc
</pre></div></div>

<p>is a short form for</p>

<div class="source">
<div class="source"><pre class="prettyprint">type,asc,true,false|name,asc,true,false|createdAt,asc,true,false
</pre></div></div>

<p>The field name can also be a path to a value, if you have complex objects:</p>

<div class="source">
<div class="source"><pre class="prettyprint">room.number,asc,true,false|person.lastName,asc,true,false|person.firstName,asc,true,false
</pre></div></div>

<p>if your class looks like this for example:</p>

<div class="source">
<div class="source"><pre class="prettyprint">class Employee {
  private Person person;
  private Room room;
  // getter and setter
}
</pre></div></div>

<p>with Person</p>

<div class="source">
<div class="source"><pre class="prettyprint">class Person {
  private String lastName;
  private String firstName;
  // getter and setter
}
</pre></div></div>

<p>and Room</p>

<div class="source">
<div class="source"><pre class="prettyprint">class Room {
  private int number;
  // getter and setter
}
</pre></div></div>

<p>Let&#x2019;s sort our list of nodes with this &#x2018;well known text&#x2019;:</p>

<div class="source">
<div class="source"><pre class="prettyprint">import org.bremersee.comparator.*;
import java.util.Comparator;
import java.util.List;
import java.util.ArrayList;

class Example {
  public static void main(String[] args) {
    List&lt;Node&gt; list = new ArrayList&lt;&gt;();
    // add nodes
    list.sort(ComparatorBuilder.builder()
        .fromWellKnownText(&quot;type|name|createdAt,desc&quot;, comparatorField -&gt; {
          if (&quot;type&quot;.equals(comparatorField.getField())) {
            return  (Comparator) (o1, o2) -&gt; (o1 instanceof Branch &amp;&amp; o2 instanceof Branch) 
                ? 0 
                : o1 instanceof Branch ? -1 : 1;
          }
          return new ValueComparator(comparatorField);
        })
        .build());
  }
}
</pre></div></div>
</section><section>
<h3><a name="XML_Schema"></a>XML Schema</h3>
<p>The XML schema of the model is available <a class="externalLink" href="http://bremersee.github.io/xmlschemas/comparator-v2.xsd">here</a>.</p></section><section>
<h3><a name="Spring_Framework_Support"></a>Spring Framework Support</h3>
<p>The Spring Common Data project contains a class for sorting, too. The class ComparatorSpringUtils contains methods to transform the comparator fields of this library into the objects of the spring framework.</p>
<p>To use the Spring Framework Support you have to add the following dependency to your project:</p>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;
    &lt;artifactId&gt;spring-data-commons&lt;/artifactId&gt;
    &lt;version&gt;{your-spring-data-commons-version}&lt;/version&gt;
&lt;/dependency&gt;
</pre></div></div></section></section>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
<p>&copy;2020 bremersee.org</p>
        </div>
      </div>
    </footer>
  </body>
</html>