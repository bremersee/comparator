<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/markdown/index.md at 23.11.2024 13:09:387
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20241123" />
    <meta http-equiv="Content-Language" content="en" />
    <title>comparator &#x2013; Bremersee Comparator</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="./" id="bannerLeft"><h2>Comparator</h2>
</a></div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="projectVersion">Version: 4.1.1</li>
        <li id="publishDate" class="pull-right">Last Published: 23.11.2024 13:09:387</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-down"></span>Project Information</a>
    <ul class="nav nav-list">
    <li><a href="dependencies.html" title="Dependencies"><span class="none"></span>Dependencies</a></li>
    <li><a href="dependency-info.html" title="Maven Coordinates"><span class="none"></span>Maven Coordinates</a></li>
    <li><a href="dependency-management.html" title="Dependency Management"><span class="none"></span>Dependency Management</a></li>
    <li><a href="distribution-management.html" title="Distribution Management"><span class="none"></span>Distribution Management</a></li>
    <li class="active"><a href="#"><span class="none"></span>About</a></li>
    <li><a href="issue-management.html" title="Issue Management"><span class="none"></span>Issue Management</a></li>
    <li><a href="licenses.html" title="Licenses"><span class="none"></span>Licenses</a></li>
    <li><a href="plugin-management.html" title="Plugin Management"><span class="none"></span>Plugin Management</a></li>
    <li><a href="plugins.html" title="Plugins"><span class="none"></span>Plugins</a></li>
    <li><a href="scm.html" title="Source Code Management"><span class="none"></span>Source Code Management</a></li>
    <li><a href="summary.html" title="Summary"><span class="none"></span>Summary</a></li>
    <li><a href="team.html" title="Team"><span class="none"></span>Team</a></li>
    </ul>
</li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="https://maven.apache.org/" title="Built by Maven" class="builtBy"><img class="builtBy"  alt="" src="#"    /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>Bremersee Comparator</h1>
<p>This project contains a builder for comparing and sorting objects.</p>
<p>The comparator can compare any kind of objects which have the same attributes or the same &#x2018;getters&#x2019;.
It uses reflection to get the values of these attributes or &#x2018;getters&#x2019;. The values may be a simple
type like java.lang.String or a complex type which implements java.lang.Comparable.</p><section><section>
<h3><a name="Usage"></a>Usage</h3>
<p>Given is for example a tree that is represented by these classes:</p>
<p>The common Node class:</p>

<div class="source"><pre class="prettyprint"><code class="language-java">import java.util.Date;

abstract class Node {

  private Date createdAt;
  private String name;
  // getter and setter
}
</code></pre></div>
<p>The Branch class:</p>

<div class="source"><pre class="prettyprint"><code class="language-java">import java.util.List;
import java.util.ArrayList;

class Branch extends Node {

  private List&lt;Node&gt; children = new ArrayList&lt;&gt;();
  // getter
}
</code></pre></div>
<p>The Leaf class:</p>

<div class="source"><pre class="prettyprint"><code class="language-java">class Leaf extends Node {

  private String value;
  // getter and setter
}
</code></pre></div>
<p>You want to sort a list of nodes by name. And if the names are equal by created date:</p>

<div class="source"><pre class="prettyprint"><code class="language-java">import org.bremersee.comparator.*;
import java.util.List;
import java.util.ArrayList;

class Example {

  public static void main(String[] args) {
    List&lt;Node&gt; list = new ArrayList&lt;&gt;();
    // add nodes
    list.sort(ComparatorBuilder.newInstance()
        .add(&quot;name&quot;, true, true, false)        // fieldName, asc, ignoreCase, nullIsFirst
        .add(&quot;createdAt&quot;, false, true, false)  // fieldName, asc, ignoreCase, nullIsFirst
        .build());
  }
}
</code></pre></div>
<p>That's all. All nodes in the list are sorted by name and date. But what happens, if you want to sort
them by type (first the branches and then the leafs) and then by name and date? There is no field
that stores the type. Then you can do this:</p>

<div class="source"><pre class="prettyprint"><code class="language-java">import org.bremersee.comparator.*;
import java.util.List;
import java.util.ArrayList;

class Example {

  public static void main(String[] args) {
    List&lt;Node&gt; list = new ArrayList&lt;&gt;();
    // add nodes
    list.sort(ComparatorBuilder.newInstance()
        .add((o1, o2) -&gt;
            (o1 instanceof Branch &amp;&amp; o2 instanceof Branch)
                || (o1 instanceof Leaf &amp;&amp; o2 instanceof Leaf) ? 0 : o1 instanceof Branch ? -1 : 1)
        .add(&quot;name&quot;, true, true, false)        // fieldName, asc, ignoreCase, nullIsFirst
        .add(&quot;createdAt&quot;, false, true, false)  // fieldName, asc, ignoreCase, nullIsFirst
        .build());
  }
}
</code></pre></div>
<p>Now you have a list, that contains the branches first, sorted by name and date, and then the leafs.</p><section>
<h4><a name="Comparator_arguments_.28class_SortOrder.29"></a>Comparator arguments (class <code>SortOrder</code>)</h4>
<p>There are four attributes which define the comparison.</p>
<table border="0" class="table table-striped">
<thead>

<tr class="a">
<th>Attribute</th>
<th>Description</th>
<th>Default</th></tr>
</thead><tbody>

<tr class="b">
<td align="left">field</td>
<td>The field name (or method name) of the object. It can be a path.</td>
<td>null</td></tr>
<tr class="a">
<td align="left"> </td>
<td>The segments are separated by a dot (.): field0.field1.field2</td>
<td> </td></tr>
<tr class="b">
<td align="left"> </td>
<td>It can be null. Then the object itself must be comparable.</td>
<td> </td></tr>
<tr class="a">
<td align="left">asc or desc</td>
<td>Defines ascending or descending ordering.</td>
<td>asc</td></tr>
<tr class="b">
<td align="left">ignoreCase</td>
<td>Makes a case ignoring comparison (only for strings).</td>
<td>true</td></tr>
<tr class="a">
<td align="left">nullIsFirst</td>
<td>Defines the ordering if one of the values is null.</td>
<td>false</td></tr>
</tbody>
</table>
<p>The field name can also be a path to a value, if you have complex objects, for example
<code>room.numer</code>, <code>person.lastName</code> or <code>person.firstName</code>, if your classes look like this:</p>

<div class="source"><pre class="prettyprint"><code class="language-java">class Employee {

  private Person person;
  private Room room;
  // getter and setter
}
</code></pre></div>
<p>with Person</p>

<div class="source"><pre class="prettyprint"><code class="language-java">class Person {

  private String lastName;
  private String firstName;
  // getter and setter
}
</code></pre></div>
<p>and Room</p>

<div class="source"><pre class="prettyprint"><code class="language-java">class Room {

  private int number;
  // getter and setter
}
</code></pre></div>
<p>The sorting of employees:</p>

<div class="source"><pre class="prettyprint"><code class="language-java">import org.bremersee.comparator.*;
import org.bremersee.comparator.model.*;
import java.util.List;
import java.util.ArrayList;

class Example {

  public static void main(String[] args) {
    List&lt;Employee&gt; list = new ArrayList&lt;&gt;();
    // add employees
    list.sort(ComparatorBuilder.newInstance()
        .addAll(List.of(
            new SortOrder(&quot;room.number&quot;, true, true, false),
            new SortOrder(&quot;person.lastName&quot;, true, true, false),
            new SortOrder(&quot;person.firstName&quot;, true, true, false)
        ))
        .build());
  }
}
</code></pre></div></section></section><section>
<h3><a name="Spring_Framework_Support"></a>Spring Framework Support</h3><section>
<h4><a name="REST_support"></a>REST support</h4>
<p>The <code>SortOrder</code> has a string representation, that can be used to pass the sort order as a query
parameter into a <code>RestController</code>.</p>
<p>The syntax is:</p>

<div class="source"><pre class="prettyprint"><code class="language-text">fieldName,asc,ignoreCase,nullIsFirst
</code></pre></div>
<p>Example:</p>

<div class="source"><pre class="prettyprint"><code class="language-text">room.number,asc,true,false
</code></pre></div>
<p>Or:</p>

<div class="source"><pre class="prettyprint"><code class="language-text">createdAt,desc,true,false
</code></pre></div>
<p>The rest controller may look like this (with OpenApi annotations):</p>

<div class="source"><pre class="prettyprint"><code class="language-java">import io.swagger.v3.oas.annotations.Operation;
import io.swagger.v3.oas.annotations.Parameter;
import io.swagger.v3.oas.annotations.media.ArraySchema;
import io.swagger.v3.oas.annotations.media.Schema;
import java.util.List;
import org.bremersee.comparator.model.SortOrder;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class TestRestController {

  @Operation(
      summary = &quot;Get something that can be sorted.&quot;,
      operationId = &quot;getSomethingSorted&quot;,
      tags = {&quot;test-controller&quot;}
  )
  @GetMapping(path = &quot;/&quot;)
  public ResponseEntity&lt;List&lt;Employee&gt;&gt; getSomethingSorted(
      @Parameter(array = @ArraySchema(schema = @Schema(type = &quot;string&quot;)))
      @RequestParam(name = &quot;sort&quot;, required = false) List&lt;SortOrder&gt; sort) {

    List&lt;Empployy&gt; list = service.findEmployees();
    list.sort(ComparatorBuilder.newInstance()
        .addAll(sort)
        .build());

    return ResponseEntity.ok(list);
  }
}
</code></pre></div>
<p>The url may look like this:</p>

<div class="source"><pre class="prettyprint"><code class="language-text">http://localhost:8080?sort=room.number,asc&amp;sort=person.lastName,asc,true
</code></pre></div>
<p>The parsing of the string is done by providing the <code>SortOrderConverter</code> as a Spring bean:</p>

<div class="source"><pre class="prettyprint"><code class="language-java">import org.bremersee.comparator.spring.converter.SortOrderConverter;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class SortOrderConverterConfiguration {

  @Bean
  public SortOrderConverter sortOrderConverter() {
    return new SortOrderConverter();
  }

}
</code></pre></div></section><section>
<h4><a name="Spring_Sort_Mapper"></a>Spring <code>Sort</code> Mapper</h4>
<p>The Spring Common Data project contains a class for sorting, too. The class <code>SortMapper</code> contains
methods to transform the sort orders of this library into the objects of the spring framework.</p>
<p>To use the Spring Framework Support you have to add the following dependency to your project:</p>

<div class="source"><pre class="prettyprint"><code class="language-xml">&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;
  &lt;artifactId&gt;spring-data-commons&lt;/artifactId&gt;
  &lt;version&gt;{your-spring-data-commons-version}&lt;/version&gt;
&lt;/dependency&gt;
</code></pre></div></section></section><section>
<h3><a name="XML_Schema"></a>XML Schema</h3>
<p>The XML schema of the model is available
<a class="externalLink" href="http://bremersee.github.io/xmlschemas/comparator-v3.xsd">here</a>.</p></section></section>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
<p>&copy;2019 bremersee.org</p>
        </div>
      </div>
    </footer>
  </body>
</html>